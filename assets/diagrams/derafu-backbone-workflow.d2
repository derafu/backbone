# Derafu Backbone - Typical Workflow
direction: down

client: Client {
  style.fill: "#f8f9fa"
  style.stroke: "#6c757d"
  style.stroke-width: 1
  style.border-radius: 5
  style.shadow: true
}

worker: Worker {
  style.fill: "#e9ecef"
  style.stroke: "#6c757d"
  style.border-radius: 5
  style.shadow: true
}

execute: Internal Execution {
  style.fill: "#e7f5ff"
  style.stroke: "#4dabf7"
  style.stroke-width: 1
  style.border-radius: 5
}

job: Job {
  style.fill: "#fff"
  style.stroke: "#007bff"
  style.stroke-width: 2
  style.border-radius: 5
  style.shadow: true
}

handler: Handler {
  style.fill: "#fff"
  style.stroke: "#20c997"
  style.stroke-width: 2
  style.border-radius: 5
  style.shadow: true
}

job1: Job 1 {
  style.fill: "#fff"
  style.stroke: "#007bff"
  style.border-radius: 3
}

job2: Job 2 {
  style.fill: "#fff"
  style.stroke: "#007bff"
  style.border-radius: 3
}

strategyA: Strategy A {
  style.fill: "#e7f5ff"
  style.stroke: "#4dabf7"
  style.border-radius: 3
}

strategyB: Strategy B {
  style.fill: "#e7f5ff"
  style.stroke: "#4dabf7"
  style.border-radius: 3
}

# Workflow connections
client -> worker: "1. Call public method"
worker -> execute: "2a. Simple logic"
worker -> job: "2b. Specific task"
worker -> handler: "2c. Complex process"

handler -> job1: "3a. Execute first job"
handler -> job2: "3b. Execute second job"
handler -> strategyA: "4a. May select Strategy A"
handler -> strategyB: "4b. Or Strategy B"

job1 -> strategyA: "5a. Apply strategy"
job2 -> strategyB: "5b. Apply strategy"
